# git on fuse

##

### _git_ on gcsfuse

I had a brilliant idea:
I'd store bare git repos in GCP Cloud Storage,
mount them in a Cloud Run instance with the [gcsfuse](https://github.com/GoogleCloudPlatform/gcsfuse)
integration,
and run a git http server off that.

Unfortunately,
even though my server worked locally,
it didn't in the cloud.

From the client side,
I'd just git `$repo.git not found`.

Suspecting the mount,
I tried running it locally,
and sure enough:

```sh
$ gcsfuse --implicit-dirs --file-mode 0444 --foreground git-seankhliao-com ./mount

# in another window
$ git -C mount/hello-world.git rev-parse HEAD
fatal: not a git repository (or any parent up to mount point /home/user/tmp/testrepo1404)
Stopping at filesystem boundary (GIT_DISCOVERY_ACROSS_FILESYSTEM not set).
```

So it seems git historically just hasn't played well with FUSE
filesystems.
The best references I could find were
[this note on errors in cloud shell](https://code.janardhanpulivarthi.com/google-cloud/storage-for-cloud-shell)
and [a similar issue for seaweedfs](https://github.com/seaweedfs/seaweedfs/issues/1182).

So... I need something else
